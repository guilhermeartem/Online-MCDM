<section ng-controller="DecisionsController">
  <div class="page-header">
    <h1>Input Matrix</h1>
  </div>
  <div class="body">
    <!--<form ng-controller="DecisionsController">-->

    <div class="form-inline">
      <div class="form-group">
        <label for="nLin">Alternatives:</label>
        <input id="nLin" class="form-control" type='number' max="12" ng-model='nLin'>
      </div>
      <div class="form-group">
        <label for="nCol">Criteria:</label>
        <input id="nCol" class="form-control" type='number' max="12" ng-model='nCol'>
      </div>
      <button class="btn btn-default" ng-click="inputDimension()">Ok</button>
    </div>

    <br>

    <div class="form-group">
      <h2>Methods:</h2>
      <h3>Add Method:</h3>
      <div class="form-inline">
        <div class="form-group">
          <label for="method">Method:</label>
          <select id="method" ng-model="methodInput.method">
            <option value="todim">TODIM</option>
            <option value="topsis">TOPSIS</option>
          </select>
        </div>
        <div class="form-group" ng-show="methodInput.method == 'todim'">
          <label for="theta">Theta:</label>
          <input id="theta" class="form-control" type='number' min="0.1" max="10" step="0.1" ng-model='methodInput.theta'>
        </div>
        <button class="btn btn-default" ng-click="inputMethod()">Ok</button>
      </div>
      <h3>Resgistered methods</h3>
      <div class="row" ng-repeat="option in matrix.methodOptions">
        <div class="col-md-2">{{option.method}}</div>
        <div class="col-md-2" ng-show="option.method=='todim'">Theta: {{option.theta}}</div>
      </div>
    </div>


      <div class="form-horizontal">
        <h2>Alternatives</h2>
        <div class="form-inline" ng-repeat="alternative in matrix.alternatives">
          <input type="text" ng-model="alternative.name" placeholder="Alternative Name">
        </div>
      </div>

      <div class="form-horizontal">
        <h2>Criterion</h2>
        <div class="form-inline row">
          <h4 class="col-md-2">Criterion Name</h4>
          <h4 class="col-md-2">Criterion Weight</h4>
          <h4 class="col-md-1">Benefit</h4>
          <h4 class="col-md-2">Data Type</h4>
        </div>
        <div class="form-inline row" ng-repeat="criterion in matrix.criteria">
          <input class="col-md-2" type="text" ng-model="criterion.name" placeholder="Criterion Name">
          <input class="col-md-2" type="number" step="any" ng-model="criterion.weight" max="1.0" min="0" placeholder="Criterion Weight">
          <input class="col-md-1" type="checkbox" data-ng-model="criterion.benefit">
          <select class="col-md-2" name="type" id="type" ng-model="criterion.type">
            <option ng-repeat="option in valueOptions" value="{{option.name}}">{{option.showName}}</option>
          </select>
        </div>
      </div>

      <div class="form-horizontal">
        <h2>Decision Matrix</h2>
        <div class="form-inline" ng-repeat="line in matrix.evaluation">
          <div class="row">
            <!--<input class="col-sm-1" ng-repeat="col in line track by $index"type="number" step="any" ng-model="line[$index]">-->
            <select class="col-sm-1" ng-options="option.value as option.abbreviation for option in listValues | filter:{ type : matrix.criteria[$index].type}" ng-repeat="col in line track by $index" ng-model="line[$index]">
            </select>
          </div>
        </div>
      </div>

      <br>

    <div class="form-horizontal">
      <h2>Tunning Matrix</h2>
      <div class="form-inline" ng-repeat="line in matrix.evaluation">
        <div class="row">
          <button class="btn btn-default col-sm-1" ng-repeat="col in line track by $index" ng-click="openTunning(matrix.criteria[$index],line[$index])">{{line[$index]}}
          </button>
        </div>
      </div>
    </div>



      <!--<input ng-repeat="field in matrix.fields track by $index" type='text' ng-model='matrix.fields[$index]' placeholder='Field:'>-->
      <div>
        <button class="btn btn-default" type='submit' ng-click="submitTable()">Submit</button>
      </div>

      <!--<div ng-repeat="alt in sortRes">-->
        <!--<div class="row">-->
          <!--<div class="col-md-3">{{alt.name}}</div>-->
          <!--<div class="col-md-3">{{alt.coefficient}}</div>-->
        <!--</div>-->

      <!--</div>-->

      <div>
        <canvas id="bar" class="chart chart-bar"
                chart-data="coefficients" chart-labels="labels" chart-series="series">
        </canvas>
      </div>

      <br> <br>
      <pre>{{ matrix | json }}</pre>
      <br> <br>
      <pre>{{ res | json }}</pre>
    <!--</form>-->
  </div>

  <script type="text/ng-template" id="myModalContent.html">
    <div class="modal-header">
      <h3 class="modal-title">Tunning value</h3>
    </div>
    <div class="modal-body">
      <h2>{{type.type}}</h2>
      <h2>{{value}}</h2>

      <div class="row" ng-click="clickCrispSlider()">
        <multi-slider name="crispSlider"
                      floor="0"
                      step="0.01"
                      ceiling="1"
                      bubbles="true"
                      ng-model="crispSlider"
                      style="margin-top:120px"
                      control="ctrlCrispSlider"
                      ng-show="type.type == 'crisp'"
                      ng-click="clickCrispSlider()">
        </multi-slider>
      </div>

      <div class="row" ng-click="clickIntervalSlider()">
        <multi-slider name="intervalSlider"
                      floor="0"
                      step="0.01"
                      ceiling="1"
                      bubbles="true"
                      ng-model="intervalSlider"
                      style="margin-top:120px"
                      control="ctrlIntervalSlider"
                      ng-show="type.type == 'interval'"
                      ng-click="clickIntervalSlider()">
        </multi-slider>
      </div>

      <c3chart ng-show="type.type == 'z-number' || type.type == 'fuzzy'" bindto-id="fuzzyGraph" chart-data="linePoints" chart-columns="lineColumns" chart-x="datax"></c3chart>

      <!--<div class="row" ng-click="clickFuzzySlider()">-->
        <multi-slider name="fuzzySlider"
                      floor="0"
                      step="0.01"
                      ceiling="1"
                      bubbles="true"
                      ng-model="fuzzySlider"
                      style="margin-top:120px"
                      control="ctrlFuzzySlider"
                      ng-show="type.type == 'fuzzy' || type.type == 'z-number'"
                      ng-click="clickFuzzySlider()">
        </multi-slider>
      <!--</div>-->

      <c3chart ng-show="type.type == 'z-number'" bindto-id="zGraph" chart-data="linePointsZ" chart-columns="lineColumnsZ" chart-x="datax"></c3chart>

      <div class="row" ng-click="clickZrelSlider()">
        <multi-slider name="ZrelSlider"
                      floor="0"
                      step="0.01"
                      ceiling="1"
                      bubbles="true"
                      ng-model="ZrelSlider"
                      style="margin-top:120px"
                      control="ctrlZrelSlider"
                      ng-show="type.type == 'z-number'"
                      ng-click="clickZrelSlider()">
        </multi-slider>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
      <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
    </div>
  </script>

</section>


